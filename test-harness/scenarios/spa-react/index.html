<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React SPA Scenario - Oryn</title>
    <link rel="stylesheet" href="/shared/styles.css">
    <!-- Load React, ReactDOM, and Babel from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [page, setPage] = useState('dashboard');
            const [users, setUsers] = useState([]);
            const [loading, setLoading] = useState(false);

            const navigate = (p) => setPage(p);

            return (
                <div className="container" style={{ maxWidth: '900px' }}>
                    <nav style={{ marginBottom: '2rem', display: 'flex', gap: '1rem' }}>
                        <a href="#" onClick={() => navigate('dashboard')}>Dashboard</a>
                        <a href="#" onClick={() => navigate('users')}>Users</a>
                        <a href="#" onClick={() => navigate('settings')}>Settings</a>
                        <div style={{ flex: 1 }}></div>
                        <a href="/">&larr; Exit SPA</a>
                    </nav>

                    {page === 'dashboard' && <Dashboard />}
                    {page === 'users' && <Users />}
                    {page === 'settings' && <Settings />}
                </div>
            );
        }

        function Dashboard() {
            return (
                <div>
                    <h1>SPA Dashboard</h1>
                    <div className="grid">
                        <div className="card">
                            <h3>Active Users</h3>
                            <div style={{ fontSize: '2rem', fontWeight: 'bold' }}>1,284</div>
                        </div>
                        <div className="card">
                            <h3>Revenue</h3>
                            <div style={{ fontSize: '2rem', fontWeight: 'bold' }}>$42,390</div>
                        </div>
                    </div>
                </div>
            );
        }

        function Users() {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                setTimeout(() => {
                    setData([
                        { id: 1, name: 'John Doe', email: 'john@example.com' },
                        { id: 2, name: 'Jane Smith', email: 'jane@example.com' },
                        { id: 3, name: 'Mike Ross', email: 'mike@example.com' }
                    ]);
                    setLoading(false);
                }, 1000);
            }, []);

            return (
                <div>
                    <h1>User Management</h1>
                    {loading ? <p>Fetching dynamic user list...</p> : (
                        <table className="user-list">
                            <thead>
                                <tr><th>Name</th><th>Email</th><th>Action</th></tr>
                            </thead>
                            <tbody>
                                {data.map(u => (
                                    <tr key={u.id}>
                                        <td>{u.name}</td>
                                        <td>{u.email}</td>
                                        <td><button style={{ fontSize: '0.8rem' }}>Edit</button></td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    )}
                </div>
            );
        }

        function Settings() {
            return (
                <div>
                    <h1>Settings</h1>
                    <label>
                        <input type="checkbox" style={{ width: 'auto' }} /> Enable Notifications
                    </label>
                    <label>
                        <input type="checkbox" style={{ width: 'auto' }} /> Public Profile
                    </label>
                    <button style={{ marginTop: '1rem' }}>Save Changes</button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>